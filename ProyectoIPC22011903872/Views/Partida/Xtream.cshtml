
@{
    ViewBag.Title = "Othello Xtream";
    Layout = "~/Views/Shared/_LayoutJuego.cshtml";
}

<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header bg-verde text-white font-weight-bold">
                <h5 class="modal-title text-center" id="exampleModalLongTitle">Cargar Partida</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form action="/Partida/CargarPartida" method="post" enctype="multipart/form-data">
                    <div class="form-group">
                        <input type="file" required class="form-control-file w-100 m-auto" name="archivo" id="archivo" accept="archivo XML, .xml" />
                    </div>
                    <div class="form-group">
                        <div class="row align-content-around justify-content-around">
                            <div class="col-12">
                                <p class="w-100 text-center">Tipo de partida</p>
                            </div>
                            <div class="col-5">
                                <input type="radio" name="tipopartida1" id="tipopartida1" value="M" /> Maquina
                            </div>
                            <div class="col-5">
                                <input type="radio" name="tipopartida1" id="tipopartida1" checked value="J" /> Jugador Local
                            </div>
                        </div>
                    </div>
                    <div id="j11" class="form-group">
                        <label for="jugador22">Jugador Invitado</label>
                        <input required type="text" class="form-control bg-light redondear" name="jugador22" id="jugador22" value="" placeholder="Nombre de Jugador Invitado" />
                    </div>
                    <hr />
                    <div class="form-group">
                        <div class="row justify-content-center  align-content-around">
                            <input type="text" hidden name="Tpartida" id="Tpartida" value="Xtream" />
                            <input type="submit" name="name" value="Cargar" class="btn btt-yellow m-auto" />
                            <button type="button" class="btn btn-dark m-auto" data-dismiss="modal">Cancelar</button>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">


            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="OthelloXtreamSolitario" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-xl modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header bg-verde text-white font-weight-bold">
                <h5 class="modal-title text-center" id="exampleModalLongTitle">Nueva Partida Solitario</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body scroll" style="max-height:70vh">
                <form action="/Partida/Partida" method="get" enctype="multipart/form-data">
                    <div class="form-group">
                        <div class="row align-content-around justify-content-around">
                            <div class="col-12">
                                <p class="w-100 text-center">Tipo de partida</p>
                            </div>
                            <div class="col-5">
                                <input type="radio" name="tipopartida" id="tipopartida"  value="M" /> Maquina
                            </div>
                            <div class="col-5">
                                <input type="radio" name="tipopartida" id="tipopartida" checked value="J" /> Jugador Local
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="row align-content-around justify-content-around">
                            <div class="col-12">
                                <p class="w-100 text-center">Modalidad</p>
                            </div>
                            <div class="col-5">
                                <input type="radio" name="modalidad" id="modalidad" checked value="Normal" /> Normal
                            </div>
                            <div class="col-5">
                                <input type="radio" name="modalidad" id="modalidad"  value="Inversa" /> Inversa
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="row">
                            <div class="col col-md-6">
                                <label for="M">Ancho del tablero</label>
                                <select class="form-control" id="M" name="M">
                                    @for (int i = 6; i <= 20; i += 2)
                                    {
                                        <option value="@i">@i</option>
                                    }
                                </select>
                            </div>
                            <div class="col col-md-6">
                                <label for="N">Largo del tablero</label>
                                <select class="form-control" id="N" name="N">
                                    @for (int i = 6; i <= 20; i += 2)
                                    {
                                        <option value="@i">@i</option>
                                    }
                                </select>
                            </div>
                        </div>
                    </div>

                    <div id="j1" class="form-group">
                        <label for="jugador2">Jugador Invitado</label>
                        <input required type="text" class="form-control bg-light redondear" name="jugador2" id="jugador2" value="" placeholder="Nombre de Jugador Invitado" />
                    </div>
                    <hr />
                    <div class="form-group">
                        <label for="Ncolores">Cantidad de colores por Jugador</label>
                        <select class="form-control bg-light" id="Ncolores">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                        </select>
                    </div>
                    <div id="c1" class="form-group">
                        <label>Usuario</label>
                        <div class="row">
                            <div class="col col-2">
                                <input type="checkbox" class="form-check-inline" name="color1" data-contrario="negro2" id="negro" value="negro" />Negro
                            </div>
                            <div class="col col-2">
                                <input type="checkbox" name="color1" class="form-check-inline" data-contrario="blanco2" id="blanco" value="blanco" />blanco
                            </div>
                            <div class="col col-2">
                                <input type="checkbox" name="color1" class="form-check-inline" data-contrario="amarillo2" id="amarillo" value="amarillo" />amarillo
                            </div>
                            <div class="col col-2">
                                <input type="checkbox" name="color1" class="form-check-inline" data-contrario="naranja2" id="naranja" value="naranja" />naranja
                            </div>
                            <div class="col col-2">
                                <input type="checkbox" name="color1" class="form-check-inline" data-contrario="rojo2" id="rojo" value="rojo" />rojo
                            </div>
                            <div class="col col-2">
                                <input type="checkbox" name="color1" class="form-check-inline" data-contrario="cafe2" id="cafe" value="cafe" />cafe
                            </div>
                            <div class="col col-2">
                                <input type="checkbox" name="color1" class="form-check-inline" data-contrario="rosado2" id="rosado" value="rosado" />rosado
                            </div>
                            <div class="col col-2">
                                <input type="checkbox" name="color1" class="form-check-inline" data-contrario="azul2" id="azul" value="azul" />azul
                            </div>
                            <div class="col col-2">
                                <input type="checkbox" name="color1" class="form-check-inline" data-contrario="celeste2" id="celeste" value="celeste" />celeste
                            </div>
                            <div class="col col-2">
                                <input type="checkbox" name="color1" class="form-check-inline" data-contrario="morado2" id="morado" value="morado" />morado
                            </div>
                        </div>
                    </div>
                    <div id="c1" class="form-group">
                        <label>Jugador Local / Maquina</label>
                        <div class="row">
                            <div class="col col-2">
                                <input type="checkbox" class="form-check-inline" name="color2" data-contrario="negro" id="negro2" value="negro" />Negro
                            </div>
                            <div class="col col-2">
                                <input type="checkbox" name="color2" class="form-check-inline" data-contrario="blanco" id="blanco2" value="blanco" />blanco
                            </div>
                            <div class="col col-2">
                                <input type="checkbox" name="color2" class="form-check-inline" data-contrario="amarillo" id="amarillo2" value="amarillo" />amarillo
                            </div>
                            <div class="col col-2">
                                <input type="checkbox" name="color2" class="form-check-inline" data-contrario="naranja" id="naranja2" value="naranja" />naranja
                            </div>
                            <div class="col col-2">
                                <input type="checkbox" name="color2" class="form-check-inline" data-contrario="rojo" id="rojo2" value="rojo" />rojo
                            </div>
                            <div class="col col-2">
                                <input type="checkbox" name="color2" class="form-check-inline" data-contrario="cafe" id="cafe2" value="cafe" />cafe
                            </div>
                            <div class="col col-2">
                                <input type="checkbox" name="color2" class="form-check-inline" data-contrario="rosado" id="rosado2" value="rosado" />rosado
                            </div>
                            <div class="col col-2">
                                <input type="checkbox" name="color2" class="form-check-inline" data-contrario="azul" id="azul2" value="azul" />azul
                            </div>
                            <div class="col col-2">
                                <input type="checkbox" name="color2" class="form-check-inline" data-contrario="celeste" id="celeste2" value="celeste" />celeste
                            </div>
                            <div class="col col-2">
                                <input type="checkbox" name="color2" class="form-check-inline" data-contrario="morado" id="morado2" value="morado" />morado
                            </div>
                        </div>
                    </div>
                    <hr />
                    <div class="form-group">
                        <div class="row justify-content-center  align-content-around">
                            <input type="text" hidden name="Tpartida" id="Tpartida" value="xtream" />
                            <input type="submit" disabled name="name" id="iniciar" value="Iniciar" class="btn btt-yellow m-auto" />
                            <button type="button" class="btn btn-dark m-auto" data-dismiss="modal">Cancelar</button>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">


            </div>
        </div>
    </div>
</div>
@if (!string.IsNullOrEmpty(ViewBag.mensaje))
{
    <div id="danger" style='display:none' class="alert alert-danger bg-naranja alert-dismissible" role="alert">
        <div id="texto">
            <h3 class="text-white font-weight-bold text-center">
                @ViewBag.mensaje
            </h3>
        </div>

    </div>}
<div class="row justify-content-center align-content-center" style="height:85vh">
    <div class="col col-md-4">
        <div class="card bg-transparent">
            <div class="card-header" style="background-color:rgba(255, 255, 255,0.57)">
                <h1 style="font-family: Script MT" class="text-white display-2 font-weight-bold text-center borde-texto">Othello Xtream</h1>
            </div>
            <div class="card-body" style="background-color:rgba(255, 255, 255,0.57)">
                <div class="mb-5">
                    @* @Html.ActionLink("Nueva Partida Solitario", "Partida", "Partida", new { color1="", color2="" }, new { @class = "btn btt-n1 btn-block redondear" })*@
                    <button type="button" class="btn btt-n1 btn-block redondear" data-toggle="modal" data-target="#OthelloXtreamSolitario">
                        Nueva Partida Solitario
                    </button>
                </div>
                <div class="mb-5">
                    <button type="button" class="btn btt-n2 btn-block redondear" data-toggle="modal" data-target="#exampleModalCenter">
                        Cargar Partida
                    </button>
                </div>
                <div class="mb-5">
                    @Html.ActionLink("Nueva Partida Multijugador", "Index", "Partida", new { @class = "btn btn-dark btn-block redondear" })
                </div>
            </div>
        </div>
    </div>
</div>

@section scripts{
    <script>
        $(document).ready(function () {
            var numeroc1 = 0;
            var numeroc2 = 0;
            $("#danger").show();
            $("#danger").hide(10000);
            $("input[type=radio][name=tipopartida]").change(function () {
                if (this.value == "M") {
                    $("#j1").hide();
                    $("#jugador2").val("Maquina");
                } else {
                    $("#j1").show();
                    $("#jugador2").val("");
                }
            });
            $("input[type=radio][name=colorjugador]").change(function () {
                if (this.value == "A") {
                    $("#c1").hide();
                    $("#color1").val("");
                    $("#color2").val("");
                } else {
                    $("#c1").show();
                    $("#color1").val("negro");
                    $("#color2").val("blanco");
                    $("#color").val("negro");
                }
            });
            $("#color").change(function () {
                if ($("#color").val() == "negro") {
                    $("#color1").val("negro");
                    $("#color2").val("blanco");
                } else {
                    $("#color2").val("negro");
                    $("#color1").val("blanco");
                }
            });
            $("#Ncolores").change(function () {
                $("input[type=checkbox][name=color1]").prop('checked', false);
                $("input[type=checkbox][name=color2]").prop('checked', false);
                document.getElementById('iniciar').disabled = true;
                numeroc2 = 0;
                numeroc1 = 0;
            });
            $("input[type=radio][name=tipopartida1]").change(function () {
                if (this.value == "M") {
                    $("#j11").hide();
                    $("#jugador22").val("Maquina");
                } else {
                    $("#j11").show();
                    $("#jugador22").val("");
                }
            });
            $("input[type=radio][name=colorjugador1]").change(function () {
                if (this.value == "A") {
                    $("#c11").hide();
                    $("#color11").val("");
                    $("#color22").val("");
                } else {
                    $("#c11").show();
                    $("#color11").val("negro");
                    $("#color22").val("blanco");
                    $("#colorr").val("negro");
                }
            });
            $("#colorr").change(function () {
                if ($("#colorr").val() == "negro") {
                    $("#color11").val("negro");
                    $("#color22").val("blanco");
                } else {
                    $("#color22").val("negro");
                    $("#color11").val("blanco");
                }
            });
            $("input[type=checkbox][name=color1]").click(function () {
                if (!$("#" + $(this).data("contrario")).prop('checked')) {
                    if ($(this).prop('checked') && numeroc1 < $('#Ncolores').val()) {
                        numeroc1++;
                        document.getElementById('iniciar').disabled = true;
                    }
                    else if (!$(this).prop('checked') && numeroc1 > 0) {
                        numeroc1--;
                        document.getElementById('iniciar').disabled = true;
                    }
                    else {
                        $(this).prop('checked', false);
                    }
                    if (numeroc1 == $('#Ncolores').val() && numeroc2 == $('#Ncolores').val()) {
                        document.getElementById('iniciar').disabled = false;
                    }
                }
                else
                {
                    $(this).prop('checked', false);
                }
            });

            $("input[type=checkbox][name=color2]").click(function () {
                if (!$("#" + $(this).data("contrario")).prop('checked')) {
                    if ($(this).prop('checked') && numeroc2 < $('#Ncolores').val()) {
                        numeroc2++;
                        document.getElementById('iniciar').disabled = true;
                    }
                    else if (!$(this).prop('checked') && numeroc2 > 0) {
                        numeroc2--;
                        document.getElementById('iniciar').disabled = true;
                    }
                    else {
                        $(this).prop('checked', false);
                    }
                    if (numeroc1 == $('#Ncolores').val() && numeroc2 == $('#Ncolores').val()) {
                        document.getElementById('iniciar').disabled = false;
                    }
                }
                else
                {
                    $(this).prop('checked', false);
                }
            });
        });
    </script>
}


